:root { --calendar-slot-gap: 2px; }

/* Calendar header controls */
.calendar-header { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:1.5rem; }
.calendar-header__left { display:flex; align-items:center; gap:0.75rem; }
.calendar-header__title { font-size:1.25rem; font-weight:600; color: var(--color-text); text-transform:capitalize; }
.calendar-header__center { flex:1; display:flex; align-items:center; justify-content:center; gap:2rem; }
.calendar-header__right { display:flex; align-items:center; gap:.75rem; }
.btn-group { display:inline-flex; align-items:center; gap:.25rem; }
.icon-btn { width:38px; height:38px; display:inline-flex; align-items:center; justify-content:center; border:1px solid var(--color-border); background: var(--color-white); border-radius: var(--radius-lg); box-shadow: var(--shadow-xs); transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast); }
.icon-btn .icon { width:20px; height:20px; color: var(--color-text-muted); }
.icon-btn:hover { background: var(--color-bg-alt); }
.btn-today { font-size:12px; padding:0.5rem 0.9rem; font-weight:500; letter-spacing:.2px; }
.btn-today { background: var(--color-primary-bg-subtle); color: var(--color-primary-darker); border-color: var(--color-primary-border); }
.btn-today:hover { background: var(--color-primary-bg-hover); }

.segmented { display:inline-flex; background: var(--color-bg-alt); padding:4px; border-radius: var(--radius-xl); border:1px solid var(--color-border); box-shadow: var(--shadow-xs); }
.segmented__btn { position:relative; background:transparent; border:0; padding:0.45rem 1rem; font-size:13px; font-weight:500; border-radius: var(--radius-md); cursor:pointer; color: var(--color-text-secondary); transition: background var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast); }
.segmented__btn:hover { background: var(--color-white); color: var(--color-text); }
.segmented__btn.is-active { background: var(--color-primary); color:#fff; box-shadow:0 2px 6px -2px rgba(0,0,0,0.15); }
.segmented__btn.is-active:hover { background: var(--color-primary-hover); }

.calendar-shell { background: var(--color-white); border:1px solid var(--color-border); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm); display:flex; flex-direction:column; height:100%; position:relative; }
.calendar-scroll { flex:1; min-height:0; overflow-y:auto; scrollbar-gutter:stable; }
.calendar-grid { display:grid; }
.calendar-time-col { position:relative; border-right:1px solid var(--color-border); background: var(--color-bg-alt); }
.calendar-time-header { position:sticky; top:0; z-index:30; min-height:32px; background: rgba(255,255,255,0.8); backdrop-filter: blur(4px); border-bottom:1px solid var(--color-border); display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:500; color: var(--color-text-muted); }
.calendar-hour-label { position:absolute; left:0; right:0; display:flex; align-items:flex-start; justify-content:center; font-size:12px; font-weight:500; color: var(--color-text-secondary); padding-top:0; }

.calendar-day-col { position:relative; border-right:1px solid var(--color-border); background: var(--color-white); }
.calendar-day-col:last-child { border-right:0; }
/* Provide slight horizontal inset for meeting blocks when using percentage widths */
.calendar-day-col .meeting-block { margin-left:0; margin-right:0; }
/* Slot base style (future refactor) */
.calendar-slot { position:absolute; left:0; right:0; line-height:1; box-sizing:border-box; }
.calendar-slot::after { content:""; position:absolute; left:0; right:0; bottom:0; height:1px; background: var(--color-border); pointer-events:none; }
.calendar-slot.bg-gray-50 { background:var(--color-bg-alt); }
/* Ensure time column slots share same visual baseline */
.calendar-time-col .calendar-slot { border:none !important; }

.meeting-block { position:absolute; border:1px solid; border-radius: var(--radius-md); font-size:11px; display:flex; align-items:center; justify-content:center; text-align:center; cursor:pointer; box-shadow: var(--shadow-sm); transition: filter var(--transition-fast), opacity var(--transition-fast); overflow:visible; /* ensure block aligns exactly to slot top/height math */ }
.meeting-block:hover { filter:brightness(0.95); }
.meeting-block.cancelled { text-decoration:line-through; opacity:0.7; }
.meeting-block__handle { position:absolute; bottom:0; left:0; right:0; height:12px; cursor:s-resize; display:flex; align-items:flex-end; justify-content:center; }
.meeting-block__handle-bar { width:32px; height:3px; border-radius:2px; background: rgba(0,0,0,0.25); margin-bottom:3px; transition: background var(--transition-fast); }
.meeting-block:hover .meeting-block__handle-bar { background: rgba(0,0,0,0.45); }

/* Truncation for compact meeting blocks (week view) */
.meeting-block .truncate { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; display:block; max-width:100%; min-width:0; }
.meeting-block.compact, .meeting-block.is-short { --meeting-line-clamp:1; }

.meeting-ghost { position:absolute; border:1px dashed; border-radius: var(--radius-md); pointer-events:none; display:flex; align-items:center; justify-content:center; font-size:11px; }
.meeting-move-ghost, .meeting-resize-ghost { position:absolute; border:1px solid; border-radius: var(--radius-md); box-shadow: var(--shadow-lg); opacity:0.85; font-size:11px; display:flex; align-items:center; justify-content:center; }

.calendar-select-none { user-select:none; }
.calendar-tooltip { position:fixed; z-index:200; background:#ffffff; color:#111827; font-size:11px; padding:6px 10px; border-radius:10px; pointer-events:none; box-shadow:0 10px 28px -6px rgba(0,0,0,0.45), 0 4px 12px -4px rgba(0,0,0,0.35); white-space:pre-line; border:1px solid rgba(0,0,0,0.18); font-weight:500; line-height:1.25; }

.conflict-flash { animation: conflict-pulse 1s ease; }
@keyframes conflict-pulse { 0% { box-shadow:0 0 0 0 rgba(239,68,68,0.6); } 70% { box-shadow:0 0 0 6px rgba(239,68,68,0); } 100% { box-shadow:0 0 0 0 rgba(239,68,68,0); } }

/* Month view */
.month-shell { display:flex; flex-direction:column; gap:8px; background: var(--color-white); border:1px solid var(--color-border); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm); padding:8px 8px 12px; }
.month-weekday-row { display:grid; grid-template-columns:repeat(7,1fr); gap:4px; padding:0 4px; }
.month-weekday-cell { font-size:11px; font-weight:600; text-transform:uppercase; text-align:center; color: var(--color-text-muted); letter-spacing:.5px; padding:4px 0 2px; }
.month-weeks { display:grid; flex:1; gap:4px; }
.month-week-row { display:grid; grid-template-columns:repeat(7,1fr); gap:4px; min-height:120px; }
.month-day-wrapper { position:relative; }
.month-day-btn { position:relative; width:100%; height:100%; background: var(--color-bg-alt); border:1px solid var(--color-border); border-radius:12px; padding:4px 6px 6px; display:flex; flex-direction:column; align-items:stretch; cursor:pointer; transition: background var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast); }
.month-day-btn:hover { background: var(--color-white); box-shadow: var(--shadow-xs); }
.month-day-btn.is-out { opacity:.45; background: var(--color-bg-alt); }
.month-day-btn.is-weekend:not(.is-out) { background: #f1f5f9; }
.month-day-btn.is-today { border-color: var(--color-primary); box-shadow:0 0 0 2px rgba(59,130,246,0.35); }
.month-day-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:2px; }
.month-day-number { font-size:12px; font-weight:600; color: var(--color-text); line-height:1; }
.month-day-body { flex:1; display:flex; flex-direction:column; gap:2px; /* overflow:hidden; removed to allow tooltips to show */ }
.month-meetings-dots { display:flex; flex-wrap:wrap; gap:4px; align-items:flex-start; position:relative; overflow:visible; }
.month-dot { width:16px; height:16px; border-radius:6px; box-shadow:0 0 0 1px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.14); position:relative; }
.month-dot[data-cancelled='true'] { filter:grayscale(.5) brightness(.85); }
.month-dot__tooltip { position:absolute; left:50%; top:0; transform:translate(-50%, -115%) scale(.92); background:#ffffff; color:#111827; padding:6px 10px; font-size:11px; font-weight:500; border-radius:10px; line-height:1.25; white-space:normal; pointer-events:none; opacity:0; transition:opacity .18s ease, transform .18s cubic-bezier(.16,.8,.3,1); z-index:10; border:1px solid rgba(0,0,0,0.18); box-shadow:0 10px 28px -6px rgba(0,0,0,0.45), 0 4px 12px -4px rgba(0,0,0,0.35); display:flex; flex-direction:column; gap:2px; }
.month-dot__tooltip-line { white-space:nowrap; }
.month-dot__tooltip::after { content:""; position:absolute; left:50%; top:100%; transform:translateX(-50%); width:10px; height:6px; background:transparent; }
.month-dot__tooltip::before { content:""; position:absolute; left:50%; top:100%; transform:translate(-50%,-2px); width:12px; height:12px; background:#ffffff; border:1px solid rgba(0,0,0,0.18); border-top:none; border-left:none; transform-origin:50% 0; rotate:45deg; box-shadow:2px 2px 4px -2px rgba(0,0,0,0.25); border-bottom-right-radius:3px; }
@media (prefers-reduced-motion:reduce){ .month-dot__tooltip { transition:none; } }
.month-dot:hover .month-dot__tooltip { opacity:1; transform:translate(-50%, -120%) scale(1); }

/* Fallback minimal utility classes to support legacy markup (will be removed after semantic refactor) */
.flex { display:flex; }
.flex-row { flex-direction:row; }
.flex-col { flex-direction:column; }
.items-center { align-items:center; }
.justify-center { justify-content:center; }
.gap-2 { gap:0.5rem; }
.leading-tight { line-height:1.1; }
.w-full { width:100%; }
.text-center { text-align:center; }
.px-1 { padding-left:0.25rem; padding-right:0.25rem; }
.px-1\.5 { padding-left:0.375rem; padding-right:0.375rem; }
.py-1 { padding-top:0.25rem; padding-bottom:0.25rem; }
.mb-1 { margin-bottom:0.25rem; }
.text-\[12px\] { font-size:12px; }
.text-\[11px\] { font-size:11px; }
.text-\[10px\] { font-size:10px; }
